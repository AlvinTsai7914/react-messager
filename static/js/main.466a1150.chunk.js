(this["webpackJsonpreact-messager"]=this["webpackJsonpreact-messager"]||[]).push([[0],{22:function(n,e,t){"use strict";t.r(e);var c,a,i,o,r,s,j,b,d,u,l,O,m,p,h=t(0),x=t(11),g=t.n(x),f=t(5),v=t(8),y=t(4),k=t(2),S=t(3),w=t(1),z=S.a.div(c||(c=Object(k.a)(["\n  width: 360px;\n  margin: 0 auto;\n"]))),J=S.a.h1(a||(a=Object(k.a)(["\n  color: #333;\n"]))),A=S.a.form(i||(i=Object(k.a)([""]))),C=S.a.input(o||(o=Object(k.a)([""]))),D=S.a.textarea(r||(r=Object(k.a)(["\n  display: block;\n  width: 100%;\n  margin-top: 8px;\n"]))),E=S.a.button(s||(s=Object(k.a)(["\n  margin-top: 8px;\n"]))),F=S.a.div(j||(j=Object(k.a)(["\n  margin-top: 16px;\n"]))),L=S.a.div(b||(b=Object(k.a)(["\n  border: 1px solid black;\n  padding: 8px 16px;\n  border-radius: 8px;\n\n  & + & {\n    margin-top: 8px;\n  }\n"]))),_=S.a.div(d||(d=Object(k.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.3);\n  padding-bottom: 4px;\n"]))),B=S.a.div(u||(u=Object(k.a)(["\n  color: #00739a;\n  font-size: 14px;\n"]))),I=S.a.div(l||(l=Object(k.a)([""]))),N=S.a.div(O||(O=Object(k.a)(["\n  font-size: 16px;\n  margin-top: 16px;\n"]))),P=S.a.div(m||(m=Object(k.a)(["\n  margin-top: 16px;\n  color: red;\n"]))),T=S.a.div(p||(p=Object(k.a)(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.5);\n  color: white;\n  font-size: 30px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"])));function q(n){var e=n.author,t=n.time,c=n.children;return Object(w.jsxs)(L,{children:[Object(w.jsxs)(_,{children:[Object(w.jsx)(B,{children:e}),Object(w.jsx)(I,{children:t})]}),Object(w.jsx)(N,{children:c})]})}var G=function(){var n=Object(h.useState)(null),e=Object(y.a)(n,2),t=e[0],c=e[1],a=Object(h.useState)(null),i=Object(y.a)(a,2),o=i[0],r=i[1],s=Object(h.useState)({nickname:"",body:""}),j=Object(y.a)(s,2),b=j[0],d=j[1],u=Object(h.useState)(),l=Object(y.a)(u,2),O=l[0],m=l[1],p=Object(h.useState)(!1),x=Object(y.a)(p,2),g=x[0],k=x[1],S=function(){return fetch("https://student-json-api.lidemy.me/comments?_sort=createdAt&_order=desc").then((function(n){return n.json()})).then((function(n){c(n)})).catch((function(n){r(n.message)}))},L=function(n){d(Object(v.a)(Object(v.a)({},b),{},Object(f.a)({},n.target.name,n.target.value)))},_=function(n){m(null)};return Object(h.useEffect)((function(){S()}),[]),Object(w.jsxs)(z,{children:[g&&Object(w.jsx)(T,{children:"Loading..."}),Object(w.jsx)(J,{children:"\u7559\u8a00\u677f"}),Object(w.jsxs)(A,{onSubmit:function(n){if(n.preventDefault(),!g){var e=b.nickname,t=b.body;k(!0),fetch("https://student-json-api.lidemy.me/comments",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({nickname:e,body:t})}).then((function(n){return n.json()})).then((function(n){k(!1),0!==n.ok?(d({nickname:"",body:""}),S()):m(n.message)})).catch((function(n){k(!1),m(n.message)}))}},children:["\u66b1\u7a31\uff1a",Object(w.jsx)(C,{name:"nickname",value:b.nickname,onChange:L,onFocus:_}),Object(w.jsx)(D,{name:"body",value:b.body,onChange:L,onFocus:_,rows:10}),Object(w.jsx)(E,{children:"\u9001\u51fa"}),O&&Object(w.jsx)(P,{children:O})]}),o&&Object(w.jsxs)(P,{children:["Something went wrong. ",o.toString()]}),t&&0===t.length&&Object(w.jsx)("div",{children:"no message"}),Object(w.jsx)(F,{children:t&&t.map((function(n){return Object(w.jsx)(q,{author:n.nickname,time:new Date(n.createdAt).toLocaleString(),children:n.body},n.id)}))})]})};g.a.render(Object(w.jsx)(G,{}),document.getElementById("root"))}},[[22,1,2]]]);
//# sourceMappingURL=main.466a1150.chunk.js.map